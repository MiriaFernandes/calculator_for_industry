{% extends "base.html" %}

{% block title %}In√≠cio{% endblock %}
{% block styles %}
{{ super() }} {# Garante que os estilos do base.html tamb√©m sejam inclu√≠dos #}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}
<!-- {% block main_classes %}w-full{% endblock %} -->
<section class="relative w-full h-screen pt-20 bg-cover bg-center home">
    <!-- Overlay com gradiente escuro + vermelho -->
    <div class="absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent"></div>

    <!-- Conte√∫do da hero -->
    <div class="relative z-10 flex flex-col justify-center h-full px-6 lg:pl-24 ">
        <div class="max-w-xl hero-content text-left">
            <h1 class="text-4xl sm:text-5xl leading-tight mb-4">
                Calculadora <br /> de Custo
            </h1>
            <p class=" mb-6">
                Descubra o verdadeiro custo da mat√©ria-prima que comp√µe sua <br />
                produ√ß√£o e ajuste sua estrat√©gia de pre√ßos.
            </p>
            <button href="#" class="home-button">
                CALCULAR
            </button>
        </div>
    </div>
</section>

<!-- WRAPPER FULL-BLEED: ocupa a largura total mesmo dentro de um main com max-w -->
<!-- FULL-BLEED sem overflow -->
<section class="relative mx-[calc(50%-50vw)] w-[100vw] overflow-x-clip py-10 sm:py-12 bg-transparent calc-container">
    <div class="px-4 sm:px-6">
        <div class="ring-1 bg-white rounded-xl shadow calc-content">

            <!-- Cabe√ßalho -->
            <header class="flex items-center justify-between gap-4 p-4 sm:p-7">
                <div class="flex items-center gap-3 sm:gap-4">
                    <img src="/static/image/illustration-calc (1).svg" alt="Mascote da Calculadora"
                        class="h-16 sm:h-20 md:h-24 lg:h-28 w-auto shrink-0" />
                </div>

                <!-- Bot√£o para abrir modal -->
                <button type="button"
                    class="btn-materia-prima inline-flex items-center gap-2 text-xs uppercase tracking-wide hover:text-neutral-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 rounded-full">
                    <p>Adicionar mat√©ria-prima</p>
                    <span><img src="/static/image/icon-plus.svg" alt="√çcone de adicionar" /></span>
                </button>
            </header>

            <!-- Tabela de insumos selecionados -->
            <div class="overflow-x-auto px-5 sm:px-7 mb-10">
                <table id="selecionadosTable" class="min-w-full border border-gray-300 text-sm">

                    <tbody>
                        <div id="manualCards" class="px-5 sm:px-7 mb-10 space-y-4">
                            <!-- Os cards aparecer√£o aqui -->
                        </div>
                        <!-- Linhas renderizadas via JS -->
                    </tbody>
                </table>
            </div>
            <!-- üîò Bot√£o externo que abre o modal -->
            <div class="px-5 sm:px-7 mb-10">
                <button id="abrirSalvarModal"
                    class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition font-semibold w-full sm:w-auto">
                    Salvar Produto
                </button>
                 <div class="text-lg font-semibold text-red-600">
                            Total: <span id="totalValor">R$ 0,00</span>
                        </div>
            </div>

            <!-- üîê Modal de salvar produto -->
            <!-- üîê Modal de salvar produto -->
            <div id="modal-salvar-produto"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white w-[90%] max-w-xl p-6 rounded-lg shadow-lg relative">

                    <!-- ‚ùå Bot√£o de fechar -->
                    <button id="close-salvar-modal"
                        class="absolute top-2 right-2 text-xl font-bold text-gray-700 hover:text-gray-900">
                        &times;
                    </button>

                    <!-- üßæ Cabe√ßalho -->
                    <h2 class="text-lg font-semibold mb-6">Salvar Produto</h2>

                    <!-- Nome do produto + total -->
                    <div class="flex flex-col sm:flex-row justify-between items-center gap-6 mb-6">
                        <input id="nomeProduto" type="text" placeholder="Nome do produto"
                            class="border border-gray-300 rounded px-4 py-2 w-full sm:w-1/2" />
                       
                    </div>

                    <!-- Bot√£o interno que realmente salva -->
                    <div>
                        <button id="btnSalvarProduto"
                            class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition font-semibold w-full sm:w-auto">
                            Salvar Produto
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- üîê Modal de mat√©ria-prima com busca e formul√°rio -->
    <div id="modal-materia-prima"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white w-[90%] max-w-2xl p-6 rounded-lg shadow-lg relative max-h-[90vh] overflow-y-auto">

            <!-- ‚ùå Bot√£o de fechar -->
            <button id="close-modal" class="absolute top-2 right-2 text-xl font-bold text-gray-700 hover:text-gray-900">
                &times;
            </button>

            <!-- üßæ Cabe√ßalho -->
            <h2 class="text-lg font-semibold mb-4">Adicionar Mat√©ria-Prima</h2>

            <!-- üîç Barra de busca -->
            <div class="flex items-center gap-4 mb-6">
                <input id="searchInput" type="text" placeholder="Buscar mat√©ria-prima..."
                    class="border border-gray-300 rounded px-4 py-2 w-full" />
                <button id="clearSearch" class="text-sm text-red-600 hover:underline">Limpar</button>
            </div>

            <!-- üì¶ Lista de insumos dispon√≠veis -->
            <div id="itensList" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                <!-- Insumos renderizados via JS -->
            </div>




        </div>
    </div>
</section>


{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/pages/produto.js') }}"></script>
{% endblock %}